
{% extends 'base/head.html' %}
{% load core_extras %}
{% block content %}
<div class="row">
	<!-- Typeahead -->
	<div class="card col-12">
		
		<div class="card-header">
			<h5 class="card-title">Client Feedback</h5>
			<div class="chart has-fixed-height" id="pie_basic"></div>

			<p>Top 3 Responses:
				{% for x in top_3_response %}
				<br>
            		"{{x}}" : {{dict_client_res|dict_get:x}}
            	{% endfor %}
			</p>
		</div>

		<div class="card-body">
			<!-- <p class="mb-4">Table dibawah ini berupa list seluruh unit dari organization JADDI</p> -->
			<div class="btn-group mr-lg-3 mb-3">
			</div>
			<div class="row">
				<div class="col-12">

					<table class="table">
					  <thead>
					    <tr>
					      <th scope="col">#</th>
					      <th scope="col">Staff</th>
					      <th scope="col">Fullname</th>
					      <th scope="col">Response</th>
					      <th scope="col">Email</th>
					      <th scope="col" class="text-center">Date</th>
					      
					    </tr>
					  </thead>
					  <tbody>
					  	{% for client_feedback in client_feedback_list%}
							<tr>
						      <td scope="row">{{forloop.counter}}</td>
						      <td scope="row">{{client_feedback.staff.profile.full_name}}</td>
						      <td scope="row">{{client_feedback.client.nama}}</td>
						      <td scope="row">{{client_feedback.followup.followup_choices}}</td>
						      <td scope="row">{{client_feedback.client.email}}</td>
						      <td scope="row">{{client_feedback.created_at}}</td>
						    </tr>
						{% endfor %}
					    
					    
					  </tbody>
					</table>

					

					

					
				</div>

			</div>
		</div>
	</div>
	<!-- /typeahead -->
</div>


<script type="text/javascript">
	
	var EchartsPieBasicDark = function() {



		    // Basic pie chart
		    var _scatterPieBasicDarkExample = function() {
		        if (typeof echarts == 'undefined') {
		            console.warn('Warning - echarts.min.js is not loaded.');
		            return;
		        }

		        // Define element
		        var pie_basic_element = document.getElementById('pie_basic');


		        //
		        // Charts configuration
		        //

		        if (pie_basic_element) {

		            // Initialize chart
		            var pie_basic = echarts.init(pie_basic_element);


		            //
		            // Chart config
		            //

		            // Options
		            pie_basic.setOption({

		                // Colors
		                color: [
		                    '#2ec7c9','#b6a2de','#5ab1ef','#ffb980','#d87a80',
		                    '#8d98b3','#e5cf0d','#97b552','#95706d','#dc69aa',
		                    '#07a2a4','#9a7fd1','#588dd5','#f5994e','#c05050',
		                    '#59678c','#c9ab00','#7eb00a','#6f5553','#c14089',
		                    '#66bb6a'
		                ],

		                // Global text styles
		                textStyle: {
		                    fontFamily: 'Roboto, Arial, Verdana, sans-serif',
		                    fontSize: 13
		                },

		                // // Add title
		                // title: {
		                //     text: 'Browser popularity',
		                //     subtext: 'Open source information',
		                //     left: 'center',
		                //     textStyle: {
		                //         fontSize: 17,
		                //         fontWeight: 500,
		                //         color: '#fff'
		                //     },
		                //     subtextStyle: {
		                //         fontSize: 12,
		                //         color: '#fff'
		                //     }
		                // },

		                // Add tooltip

		                tooltip: {
		                    trigger: 'item',
		                    backgroundColor: 'rgba(255,255,255,0.9)',
		                    padding: [10, 15],
		                    textStyle: {
		                        color: '#222',
		                        fontSize: 13,
		                        fontFamily: 'Roboto, sans-serif'
		                    },
		                    formatter: "{a} <br/>{b}: {c} ({d}%)"
		                },

		                // // Add legend
		                // legend: {
		                //     orient: 'vertical',
		                //     top: 'center',
		                //     left: 0,
		                //     data: ['IE', 'Opera', 'Safari', 'Firefox', 'Chrome'],
		                //     itemHeight: 8,
		                //     itemWidth: 8,
		                //     textStyle: {
		                //         color: '#fff'
		                //     }
		                // },

		                // Add series
		                series: [{
		                    name: 'Feedback',
		                    type: 'pie',
		                    radius: '50%',
		                    center: ['50%', '57.5%'],
		                    itemStyle: {
		                    	
		                        normal: {
		                            borderWidth: 2,
		                            borderColor: '#353f53'
		                        }
		                    },
		                    data: [
		                    	{% for x in dict_client_res %}
		                    		{value: {{dict_client_res|dict_get:x}}, name: "{{x}}"},	
		                    	{% endfor %}
		                        
		                        
		                    ]
		                }]
		            });
		        }


		        //
		        // Resize charts
		        //

		        // Resize function
		        var triggerChartResize = function() {
		            pie_basic_element && pie_basic.resize();
		        };

		        // On sidebar width change
		        var sidebarToggle = document.querySelectorAll('.sidebar-control');
		        if (sidebarToggle) {
		            sidebarToggle.forEach(function(togglers) {
		                togglers.addEventListener('click', triggerChartResize);
		            });
		        }

		        // On window resize
		        var resizeCharts;
		        window.addEventListener('resize', function() {
		            clearTimeout(resizeCharts);
		            resizeCharts = setTimeout(function () {
		                triggerChartResize();
		            }, 200);
		        });
		    };

		    return {
		        init: function() {
		            _scatterPieBasicDarkExample();
		        }
		    }
	}();

	EchartsPieBasicDark.init();
</script>
{% endblock content %}